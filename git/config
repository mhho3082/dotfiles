[user]
    # Change this if you are not `mhho3082`
    name = Max Ho
    email = 73323597+mhho3082@users.noreply.github.com

[core]
    editor = nvim
    eol = lf
    autocrlf = false

[init]
    defaultBranch = main

[push]
    default = current

[code]
    editor = nvim

# ---

# Some ideas from https://github.com/mathiasbynens/dotfiles

[alias]
    # Short status
    s = status -sb
    # Show log
    l = log
    # Show graph
    ll = log --graph --abbrev-commit --date-order --all

    goto = checkout
    gobr = checkout -b

    a = add
    aa = add -A
    c = commit

    # Remove all changes from staging
    unstage = reset --mixed
    # Remove all changes made
    discard = reset --hard
    # Undo last commit softly
    uncommit = reset HEAD~1 --mixed

    # `fix i` Fix (add staged changes to) a commit with (partial) SHA i (found from log)
    fix = !"git commit --fixup $1; git rebase -i --autosquash $1~1"

    # Diff between latest commit and current
    d = !"git diff-index --quiet HEAD -- || clear; git diff --patch-with-stat"
    # `git di i` Diff between i revisions ago and current
    di = !"d() { git diff --patch-with-stat HEAD~$1; }; git diff-index --quiet HEAD -- || clear; d"

    # Remove branch
    r = branch -D

    # Show verbose output about tags, branches or remotes
    tags = tag -l
    branches = branch --all --format='%(HEAD) %(color:yellow)%(refname:short)%(color:reset) - %(contents:subject) %(color:green)(%(committerdate:relative)) [%(authorname)]' --sort=-committerdate
    remotes = remote --verbose

    # List contributors with number of commits
    contributors = shortlog --summary --numbered

# ---

[log]
    decorate = true
    abbrevCommit = true

[format]
    pretty = "%C(magenta)%h%Creset -%C(red)%d%Creset %s %C(green)(%cr) %C(cyan)<%an>%Creset"

# ---

[merge]
    tool = nvim

[mergetool]
  prompt = false

[mergetool "nvim"]
    cmd = nvim -f -c \"Gdiffsplit!\" \"$MERGED\"

[mergetool "vscode"]
    cmd = code --wait $MERGED

# ---

[diff]
    tool = nvimdiff

[difftool]
    prompt = false

[difftool "nvimdiff"]
    cmd = "nvim -d \"$LOCAL\" \"$REMOTE\""

[difftool "vscode"]
    cmd = code --wait --diff $LOCAL $REMOTE

# ---

[filter "lfs"]
    smudge = git-lfs smudge -- %f
    process = git-lfs filter-process
    required = true
    clean = git-lfs clean -- %f

# ---

[credential "https://github.com"]
	helper = !/usr/bin/gh auth git-credential

[credential "https://gist.github.com"]
	helper = !/usr/bin/gh auth git-credential

[url "git@github.com:"]

	insteadOf = "gh:"
	pushInsteadOf = "github:"
	pushInsteadOf = "git://github.com/"

[url "git://github.com/"]

	insteadOf = "github:"

[url "git@gist.github.com:"]

	insteadOf = "gst:"
	pushInsteadOf = "gist:"
	pushInsteadOf = "git://gist.github.com/"

[url "git://gist.github.com/"]

	insteadOf = "gist:"
